<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Курс валют NBP</title>
</head>
<body>
  <h1>Поточні курси валют NBP</h1>
  <div id="rates"></div>

  <script>
    async function getExchangeRateNBP(table, code) {
      const url = `https://api.nbp.pl/api/exchangerates/rates/${table}/${code}/?format=json`;
      try {
        const response = await fetch(url, {
          headers: { 'Accept': 'application/json' }
        });
        if (!response.ok) {
          throw new Error(`Помилка запиту: ${response.status}`);
        }
        const data = await response.json();
        return data.rates[0].mid;
      } catch (error) {
        console.error('Помилка отримання курсу:', error);
        return null;
      }
    }

    async function displayRates() {
      const codes = ['USD', 'EUR', 'CHF'];
      const ratesDiv = document.getElementById('rates');
      ratesDiv.innerHTML = '<p>Завантаження курсів...</p>';

      const promises = codes.map(async (code) => {
        const rate = await getExchangeRateNBP('a', code);
        return { code, rate };
      });

      const results = await Promise.all(promises);

      ratesDiv.innerHTML = results.map(({ code, rate }) =>
        rate ? `<p>${code}: ${rate} PLN</p>` : `<p>${code}: Дані недоступні</p>`
      ).join('');
    }

    // Запускаємо показ курсів після завантаження сторінки
    window.addEventListener('DOMContentLoaded', displayRates);
  </script>
</body>
</html>
